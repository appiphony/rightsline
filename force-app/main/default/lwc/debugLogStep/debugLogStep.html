<template>
    <c-step
        class="slds-is-absolute"
        container-size="small"
        header="Debug Log Management"
        back-hidden="true"
        next-label="Finish"
        next-icon-name="utility:check"
        next-disabled={nextDisabled}
        onnext={handleNext}
    >
        <template if:true={isLoading}>
            <lightning-spinner alternative-text="spinner"></lightning-spinner>
        </template>
            <div slot="description">
                <div class="slds-var-p-horizontal_large">
                    <p class="slds-var-m-bottom_x-small">Your Rightsline Salesforce integration automatically creates activity logs for use in the debugging process.</p>
                    <p>You can choose to log both success and error activity, or error activity alone.</p>
                </div>
            </div>
            <div class="slds-var-p-around_large">
                <div class="slds-grid slds-grid_vertical-align-start slds-gutters_direct-x-small">
                    <div class="slds-col slds-shrink-none slds-grow-none">
                        <div class="slds-form-element__label">Logged Activity</div>
                        <lightning-radio-group
                            name="logLevel"
                            label="Logged Activity"
                            variant="label-hidden"
                            options={options}
                            value={logLevel}
                            onchange={handleChange}
                            type="button"
                        ></lightning-radio-group>
                    </div>
                    <div class="slds-col">
                        <div class="slds-grid">
                            <div class="slds-col slds-grow-none">
                                <div class="slds-form-element__label rl-log-label">Max Log Records Retained</div>
                            </div>
                            <div class="slds-col slds-grow-none">
                                <lightning-helptext content="This is the maximum number of log records that will be saved in this Salesforce organization. If the limit is hit, older records will be automatically removed to make room for new ones."></lightning-helptext>
                            </div>
                        </div>
                        <lightning-input
                            name="logLimit"
                            type="number"
                            variant="label-hidden"
                            value={logLimit}
                            onchange={handleChange}
                            label="Max Log Records Retained"
                        ></lightning-input>
                    </div>
                </div>
            <div class="slds-var-m-top_medium">
                <div class="slds-grid slds-grid_vertical-align-end slds-gutters_direct-xx-small">
                    <div class="slds-col">
                        <lightning-input
                            value={logCount}
                            label="Log Record Count"
                            disabled
                        ></lightning-input>
                    </div>
                    <div class="slds-col slds-grow-none slds-shrink-none">
                        <lightning-button
                            disabled={deleteDisabled}
                            icon-name="utility:delete"
                            variant="destructive"
                            label="Delete All"
                            onclick={openConfirmationModal}
                        ></lightning-button>
                    </div>
                </div>
            </div>
        </div>
    </c-step>
    <!-- MODAL -->
    <c-modal
        is-loading={isLoading}
        title="Delete Log Records?"
        class="debug-confirmation-modal"
        confirm-label="Confirm"
        oncancel={closeConfirmationModal}>
        <div class="slds-text-align_center">
            <p class="slds-var-m-bottom_x-small">This will queue all existing log records in this Salesforce org for deletion.</p>
            <p>Deletion may take up to an hour to complete. Continue?</p>
        </div>
    ></c-modal>
</template>